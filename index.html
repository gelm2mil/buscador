<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUNICIPALIDAD DE CHIMALTENANGO — MULTAS 2025</title>

    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">

    <!-- XLSX para exportar Excel -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

</head>
<body>

<div class="contenedor">

    <!-- ========== HEADER ========== -->
    <div class="header-top">

        <!-- ICONO MUNICIPALIDAD -->
        <div class="logo-box">
            <img src="icons/logo.png" alt="MUNI">
        </div>

        <!-- TITULOS -->
        <div class="titulos">
            <div class="titulos-linea1">MUNICIPALIDAD DE - CHIMALTENANGO</div>
            <div class="titulos-linea2">CHIMALTENANGO</div>
            <div class="titulos-linea3">Sistema CONSULTA DE MULTAS - 2025 ? == BY GELM == ?</div>
            <div class="titulos-linea4">puedes verificar si tienes multas pendientes de pago</div>
        </div>

        <!-- ICONO GELM (DESCARGA EXCEL VERSION PRO) -->
        <div class="logo-box" style="cursor:pointer;" onclick="exportarExcelPRO()">
            <img src="icons/icon-512.png" alt="GELM">
        </div>

    </div>

    <!-- ESTADO DE CARGA -->
    <div id="estado">Cargando archivo JSON...</div>

    <!-- ========== BUSCADOR ========== -->
    <div class="buscador">
        <input id="busquedaInput" type="text"
               placeholder="Placa, DPI, No. licencia, documento o No. calcomanía...">
        <button onclick="buscar()">Buscar</button>
    </div>

    <!-- NOTA -->
    <p class="nota">
        Puedes escribir con o sin espacios / guiones. Ej:<br>
        <b>1856 12258 0413</b> ó <b>1856122580413</b> &nbsp; | &nbsp;
        <b>1056-12250413</b> ó <b>105612250413</b> &nbsp; | &nbsp;
        <b>40</b> (No. calcomanía)
    </p>

    <!-- ========== RESULTADOS ========== -->
    <div id="resultado">
        <div id="resultado-principal"></div>
        <div id="similares-contenedor"></div>
    </div>

    <!-- BOTÓN CONTACTO -->
    <div class="contacto-wrapper">
        <button class="btn-contacto" onclick="window.location.href='mailto:nerox2mil@proton.me'">
            <span class="icono">✦</span>
            <span>Más información / Contactar a GELM</span>
        </button>
    </div>

    <!-- FOOTER -->
    <div class="footer-info">
        <div>2014 - 2025 | <strong>BY GELM</strong> | Delegación de Transportes PMT - Chimaltenango<br>
        att: ---[GELM]---</div>
        <div id="fechaHora"></div>
    </div>

</div>

<!-- APP.JS -->
<script src="app.js"></script>

<script>
// ================== RELOJ ===================
setInterval(() => {
    const f = new Date();
    document.getElementById("fechaHora").textContent =
        f.toLocaleDateString("es-ES", { weekday:"long", year:"numeric", month:"long", day:"numeric" }) +
        " — " + f.toLocaleTimeString("es-ES");
}, 1000);
</script>

<!-- SERVICE WORKER -->
<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
